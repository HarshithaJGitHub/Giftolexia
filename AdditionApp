<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Learn Math The Fun Way - Addition</title>
    <style>
      /* Basic body styles */
      body {
        margin: 0;
        background-color: #f8f9fa;
      }
      /* A universal rule for more predictable layouts */
      * {
        box-sizing: border-box;
      }

      /* --- DEFAULT STYLES (LAPTOP VIEW) --- */
      /* These styles apply to screens wider than 900px */

      .app-container {
        font-family: serif;
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
        background-color: white;
      }

      .header-container {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 20px;
      }

      .header-logo img {
        width: 120px;
        height: 100px;
        object-fit: contain;
      }

      .header-center {
        text-align: center;
        flex: 1;
        padding: 0 20px;
      }

      .header-title {
        color: black;
        font-size: 34px;
        margin: 0 0 10px 0;
        font-family: serif;
      }

      .progress-container {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 20px;
        width: 100%;
      }

      .progress-bar {
        flex: 1;
        height: 10px;
        background-color: white;
        border: 2px solid black;
        border-radius: 5px;
        max-width: 400px;
      }

      .progress-fill {
        height: 100%;
        background-color: grey;
        border-radius: 5px;
        transition: width 0.5s ease-in-out;
      }

      .score-text {
        color: black;
        font-size: 20px;
        font-weight: bold;
        font-family: serif;
      }

      .timer {
        width: 80px;
        text-align: right;
        color: black;
        font-size: 24px;
        font-weight: bold;
      }

      .main-content {
        display: flex;
        border: 2px solid black;
        border-radius: 10px;
        overflow: hidden;
        min-height: 450px;
      }

      .level-panel {
        width: 300px;
        border-right: 2px solid black;
        padding: 25px;
        display: flex;
        flex-direction: column;
        gap: 25px;
      }

      .level-button {
        flex: 1;
        padding: 15px;
        border: 2px solid black;
        color: black;
        border-radius: 8px;
        cursor: pointer;
        text-align: left;
        transition: all 0.3s ease;
        display: flex;
        font-family: serif;
        font-size: 24px;
        flex-direction: column;
        justify-content: center;
      }

      .question-panel {
        flex: 1;
        display: flex;
        flex-direction: column;
        padding: 25px;
        text-align: center;
      }

      .question-area {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }

      .footer {
        text-align: center;
        padding: 20px 0;
        font-family: serif;
        color: #555;
        font-size: 20px;
      }

      /* --- RESPONSIVE STYLES (MOBILE VIEW) --- */
      /* These styles apply when the screen is 900px wide or less */

      @media (max-width: 900px) {
        .header-container {
          flex-direction: column;
          gap: 15px;
        }

        /* Create a new flex container for the top row (logo & timer) */
        .header-top-row {
          display: flex;
          justify-content: space-between;
          align-items: center;
          width: 100%;
        }

        /* The center content now becomes the bottom row */
        .header-center {
          padding: 0;
        }

        /* Main content stacks vertically */
        .main-content {
          flex-direction: column;
        }

        .level-panel {
          width: 100%;
          border-right: none;
          border-bottom: 2px solid black;
          padding: 20px;
        }

        .question-panel {
          padding: 20px;
          min-height: 400px;
        }
      }
    </style>
  </head>

  <body>
    <div id="root"></div>

    <!-- Load React from CDN -->
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>

    <!-- Load Babel for JSX support -->
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <!-- Your React Component -->
    <script type="text/babel">
      const AdditionLearningApp = () => {
        const [selectedLevel, setSelectedLevel] = React.useState(null);
        const [gameMode, setGameMode] = React.useState("Numerical");
        const [score, setScore] = React.useState(0);
        const [currentQuestion, setCurrentQuestion] = React.useState(null);
        const [userAnswer, setUserAnswer] = React.useState("");
        const [feedback, setFeedback] = React.useState("");
        const [isCorrect, setIsCorrect] = React.useState(null);
        const [time, setTime] = React.useState(0);

        React.useEffect(() => {
          const timerId = setInterval(() => {
            setTime((prevTime) => prevTime + 1);
          }, 1000);
          return () => clearInterval(timerId);
        }, []);

        const formatTime = (totalSeconds) => {
          const minutes = Math.floor(totalSeconds / 60)
            .toString()
            .padStart(2, "0");
          const seconds = (totalSeconds % 60).toString().padStart(2, "0");
          return `${minutes}:${seconds}`;
        };

        const appreciationMessages = [
          "Great job! ðŸŽ‰",
          "Well done!",
          "You're becoming a math master!",
          "Fantastic work!",
          "Keep it up!",
        ];

        const generateQuestion = (level, gameMode) => {
          const generateOperands = (level) => {
            let a1, a2;
            switch (level) {
              case 1:
                a1 = Math.floor(Math.random() * 20) + 1;
                a2 = Math.floor(Math.random() * 20) + 1;
                break;
              case 2:
                a1 = Math.floor(Math.random() * 90) + 10;
                a2 = Math.floor(Math.random() * 99) + 1;
                break;
              case 3:
                a1 = Math.floor(Math.random() * 151) + 100;
                a2 = Math.floor(Math.random() * 240) + 10;
                break;
              default:
                a1 = 5;
                a2 = 5;
            }
            return { a1, a2, sum: a1 + a2 };
          };
          const wordProblemGenerators = {
            1: () => {
              const { a1, a2, sum } = generateOperands(1);
              const templates = [
                `Priya has ${a1} marbles. Her friend gives her ${a2} more marbles. How many marbles does Priya have now?`,
                `Rahul collects ${a1} leaves on Monday and ${a2} leaves on Tuesday. How many leaves did he collect in total?`,
                `There are ${a1} red flowers and ${a2} yellow flowers in the garden. How many flowers are there in total?`,
                `Arya reads ${a1} pages of a book before lunch and ${a2} pages after lunch. How many pages did he read in total?`,
                `At the school picnic, ${a1} students played cricket and ${a2} students played football. How many students played games in total?`,
              ];
              return {
                question:
                  templates[Math.floor(Math.random() * templates.length)],
                correctAnswer: `${sum}`,
              };
            },
            2: () => {
              const { a1, a2, sum } = generateOperands(2);
              const templates = [
                `A fruit shop sold ${a1} apples in the morning and ${a2} apples in the evening. How many apples were sold in total?`,
                `In a library, there are ${a1} books on the first shelf and ${a2} books on the second shelf. How many books are there in total?`,
                `A farmer has ${a1} cows and buys ${a2} more. How many cows does he have now?`,
                `Meera scored ${a1} marks in Science and ${a2} marks in Mathematics. What is her total score?`,
                `There are ${a1} students in one class and ${a2} students in another class. How many students are there in both classes together?`,
              ];
              return {
                question:
                  templates[Math.floor(Math.random() * templates.length)],
                correctAnswer: `${sum}`,
              };
            },
            3: () => {
              const { a1, a2, sum } = generateOperands(3);
              const templates = [
                `A school collected ${a1} rupees on Monday and ${a2} rupees on Tuesday for planting trees. What is the total amount collected?`,
                `A factory made ${a1} toys in the first shift and ${a2} toys in the second shift. What was the total number of toys made?`,
                `A train carries ${a1} passengers from Delhi and later picks up ${a2} more passengers. How many passengers are now on the train?`,
                `Neha's father saved ${a1} rupees in January and ${a2} rupees in February. How much money was saved in total?`,
                `A bookstore sold ${a1} books in the morning and ${a2} books in the afternoon. How many books were sold in total?`,
              ];
              return {
                question:
                  templates[Math.floor(Math.random() * templates.length)],
                correctAnswer: `${sum}`,
              };
            },
          };
          const numericalProblemGenerators = {
            1: () => {
              const { a1, a2, sum } = generateOperands(1);
              return { question: `${a1} + ${a2} = ?`, correctAnswer: `${sum}` };
            },
            2: () => {
              const { a1, a2, sum } = generateOperands(2);
              return { question: `${a1} + ${a2} = ?`, correctAnswer: `${sum}` };
            },
            3: () => {
              const { a1, a2, sum } = generateOperands(3);
              return { question: `${a1} + ${a2} = ?`, correctAnswer: `${sum}` };
            },
          };
          const generator =
            gameMode === "Word Problems"
              ? wordProblemGenerators[level]
              : numericalProblemGenerators[level];
          return generator ? generator() : null;
        };

        const levels = [
          { id: 1, label: "Level 1", description: "Basic Addition" },
          { id: 2, label: "Level 2", description: "Intermediate Addition" },
          { id: 3, label: "Level 3", description: "Advanced Addition" },
        ];

        const handleLevelSelect = (level) => {
          setSelectedLevel(level);
          setCurrentQuestion(generateQuestion(level, gameMode));
          setFeedback("");
          setIsCorrect(null);
          setUserAnswer("");
        };

        const handleAnswerSubmit = () => {
          if (!currentQuestion) return; // Prevent error if no question is loaded
          const normalizedAnswer = userAnswer.trim();
          if (normalizedAnswer === currentQuestion.correctAnswer) {
            setScore(score + 10);
            setFeedback(
              appreciationMessages[
                Math.floor(Math.random() * appreciationMessages.length)
              ]
            );
            setIsCorrect(true);
            setTimeout(() => {
              setCurrentQuestion(generateQuestion(selectedLevel, gameMode));
              setUserAnswer("");
              setFeedback("");
              setIsCorrect(null);
            }, 1500);
          } else {
            setFeedback(
              `Not quite! The correct answer is ${currentQuestion.correctAnswer}`
            );
            setIsCorrect(false);
            setTimeout(() => {
              setCurrentQuestion(generateQuestion(selectedLevel, gameMode));
              setUserAnswer("");
              setFeedback("");
              setIsCorrect(null);
            }, 2500);
          }
        };

        return (
          <div className="app-container">
            {/* Header Section */}
            <div className="header-container">
              {/* This div is for the mobile view layout */}
              <div className="header-top-row">
                <div className="header-logo">
                  {/* Using a placeholder logo that will work for everyone */}
                  <img src="logo.png" alt="Math App Logo" />
                </div>
                <div className="timer">{formatTime(time)}</div>
              </div>

              <div className="header-center">
                <h1 className="header-title">
                  Learn Math The Fun Way - Addition
                </h1>
                <div className="progress-container">
                  <div className="progress-bar">
                    <div
                      className="progress-fill"
                      style={{ width: `${Math.min(score / 10, 100)}%` }}
                    ></div>
                  </div>
                  <div className="score-text">Score: {score}</div>
                </div>
              </div>
              {/* Timer is duplicated for desktop view; CSS will hide the appropriate one */}
              <div className="timer" style={{ display: "none" }}>
                {formatTime(time)}
              </div>
            </div>

            {/* Main Content Area */}
            <div className="main-content">
              {/* Level Selection Section */}
              <div className="level-panel">
                {levels.map((level) => (
                  <button
                    key={level.id}
                    onClick={() => handleLevelSelect(level.id)}
                    className="level-button"
                    style={{
                      backgroundColor:
                        selectedLevel === level.id ? "grey" : "white",
                    }}
                  >
                    <div style={{ fontWeight: "bold" }}>{level.label}</div>
                    <div style={{ fontSize: "18px", marginTop: "5px" }}>
                      {level.description}
                    </div>
                  </button>
                ))}
              </div>

              {/* Main Question Area */}
              <div className="question-panel">
                <div className="question-area">
                  {!selectedLevel ? (
                    <h2
                      style={{
                        color: "black",
                        fontFamily: "serif",
                        textAlign: "center",
                        fontSize: "28px",
                      }}
                    >
                      Choose a level to start!
                    </h2>
                  ) : currentQuestion ? (
                    <div
                      style={{
                        display: "flex",
                        flexDirection: "column",
                        alignItems: "center",
                        justifyContent: "center",
                        width: "100%",
                        maxWidth: "500px",
                        margin: "0 auto",
                      }}
                    >
                      <div
                        style={{
                          fontSize: "26px",
                          fontFamily: "serif",
                          marginBottom: "30px",
                          color: "black",
                          textAlign: "center",
                        }}
                      >
                        {currentQuestion.question}
                      </div>
                      <input
                        type="text"
                        value={userAnswer}
                        onChange={(e) => {
                          if (/^[0-9\s]*$/.test(e.target.value)) {
                            setUserAnswer(e.target.value);
                          }
                        }}
                        placeholder="Enter your answer"
                        style={{
                          width: "250px",
                          padding: "12px",
                          fontFamily: "serif",
                          fontSize: "20px",
                          border: `2px solid ${
                            isCorrect === null
                              ? "black"
                              : isCorrect
                              ? "green"
                              : "red"
                          }`,
                          borderRadius: "8px",
                          marginBottom: "20px",
                          textAlign: "center",
                        }}
                        onKeyPress={(e) =>
                          e.key === "Enter" && handleAnswerSubmit()
                        }
                      />
                      <button
                        onClick={handleAnswerSubmit}
                        style={{
                          padding: "12px 24px",
                          backgroundColor: "white",
                          color: "black",
                          border: "2px solid black",
                          borderRadius: "8px",
                          cursor: "pointer",
                          fontWeight: "bold",
                          fontFamily: "serif",
                          fontSize: "16px",
                          marginBottom: "20px",
                        }}
                      >
                        Submit Answer
                      </button>
                      {feedback && (
                        <div
                          style={{
                            color: isCorrect ? "green" : "red",
                            fontWeight: "bold",
                            fontFamily: "serif",
                            fontSize: "18px",
                          }}
                        >
                          {feedback}
                        </div>
                      )}
                    </div>
                  ) : null}
                </div>

                <div
                  style={{
                    display: "flex",
                    justifyContent: "center",
                    gap: "20px",
                  }}
                >
                  {["Numerical", "Word Problems"].map((mode) => (
                    <button
                      key={mode}
                      onClick={() => {
                        if (gameMode !== mode) {
                          setGameMode(mode);
                          if (selectedLevel) {
                            setCurrentQuestion(
                              generateQuestion(selectedLevel, mode)
                            );
                          }
                        }
                      }}
                      style={{
                        padding: "10px 20px",
                        border: "2px solid black",
                        backgroundColor: gameMode === mode ? "grey" : "white",
                        color: "black",
                        borderRadius: "8px",
                        fontFamily: "serif",
                        cursor: "pointer",
                        fontSize: "20px",
                      }}
                    >
                      {mode}
                    </button>
                  ))}
                </div>
              </div>
            </div>

            <footer className="footer">@Giftolexia</footer>
          </div>
        );
      };
      // Re-render the header to match the desktop layout on wider screens
      // The CSS for the .header-container will re-arrange the elements correctly
      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<AdditionLearningApp />);
    </script>
  </body>
</html>
